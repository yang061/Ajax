<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /* 
        1.http协议：网络传输协议
         
      */
      // (1)创建xhr
      let xhr = new XMLHttpRequest()

      //   请求未初始化
      console.log(xhr.readyState) //0
      // (2)设置请求方法和请求地址
      xhr.open('post', 'http://www.liulongbin.top:3009/api/login')

      //   服务器连接已建立
      console.log(xhr.readyState) //1
      // (3)设置请求
      xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded')
      // (4)发送请求
      xhr.send('username=admin&password=123456')

      // (5)注册响应事件
      //   xhr.onload = function () {
      //     console.log(xhr.readyState) //4
      //     console.log(xhr.responseText) //{"code":200,"msg":"登录成功！"}
      //   }
      xhr.onreadystatechange = function () {
        //a. onload 是新式浏览器才支持的
        //b. 如果要兼容更早的浏览器，可以使用 onreadystatechange
        //c. onreadystatechange触发时机 ： xhr.readState状态变化

        console.log(xhr.readyState) //执行三次 2 3 4
        // 当readyState为4 ，表示响应数据了
        if (xhr.readyState == 4) {
          console.log(xhr.responseText)
        }
      }
    </script>
  </body>
</html>
